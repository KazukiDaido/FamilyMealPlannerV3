# 要件定義

## 通知機能（実装済み）

## ユーザーストーリー
**As a** 家族の一員  
**I want to** 食事時間のリマインダー通知を受け取る  
**So that** 食事の準備や参加を忘れないようにできる

## 受入基準（Doneの定義）
- [ ] 朝食・昼食・夕食の時間に通知が送信される
- [ ] 通知のON/OFFを設定できる
- [ ] 通知時間をカスタマイズできる
- [ ] 通知内容に家族メンバー情報が含まれる
- [ ] アプリが閉じていても通知が動作する
- [ ] 通知をタップするとアプリが開く

## 非機能要件
- **パフォーマンス**: 通知の送信が遅延しない
- **セキュリティ**: 通知内容に個人情報は含まない
- **UX**: 通知設定が直感的に操作できる
- **互換性**: iOS標準の通知システムを使用

## 影響範囲
- 新規ファイル: `src/services/notificationService.ts`
- 新規画面: `src/screens/Settings/NotificationSettingsScreen.tsx`
- 修正ファイル: `App.tsx`, `src/store/slices/userSlice.ts`
- 依存関係: `expo-notifications`

## 設計メモ
- ローカル通知を使用（サーバー不要）
- 通知スケジュールはアプリ起動時に設定
- 設定変更時は既存の通知をキャンセルして再設定

---

## 個人回答機能（新規）

### ユーザーストーリー
**As a** 家族メンバー  
**I want to** 自分のデバイスで食事参加を回答できる  
**So that** リアルタイムで正確な参加状況を共有できる

### 受入基準（Doneの定義）
- [ ] 各家族メンバーが自分のアカウントでログインできる
- [ ] ホーム画面で今日の食事（朝・昼・夕）を確認できる
- [ ] ワンタップで参加/不参加を回答できる
- [ ] 自分の回答状況がリアルタイムで反映される
- [ ] 他の家族メンバーの回答状況が見える
- [ ] 回答の変更・取り消しができる
- [ ] 期限（食事時間の30分前など）を過ぎると回答不可

### 非機能要件
- **パフォーマンス**: 回答の反映が1秒以内
- **セキュリティ**: 他人のアカウントで回答できない
- **UX**: 直感的な操作（スワイプやタップ）
- **互換性**: 複数デバイスで同期

### 影響範囲
- 新規ファイル: `src/screens/Home/PersonalResponseScreen.tsx`
- 新規サービス: `src/services/authService.ts`
- 修正ファイル: `src/store/slices/familySlice.ts`, `App.tsx`
- 依存関係: Firebase Authentication (予定)

### 設計メモ
- 認証システム: 簡易ログイン（家族メンバー選択）
- データ同期: Redux + AsyncStorage
- UI: カード形式で見やすく
- 通知連携: 回答リマインダー
